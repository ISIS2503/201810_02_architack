//Node-red Yale Terminado
[{"id":"a1a50d40.0a3f1","type":"debug","z":"36dec49a.6065fc","name":"Arduino msg","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":380,"y":300,"wires":[]},{"id":"96be95d2.0fd5b8","type":"serial in","z":"36dec49a.6065fc","name":"Arduino","serial":"f930c86a.0dc7b8","x":190,"y":220,"wires":[["a1a50d40.0a3f1","925a10fa.fa3dc"]]},{"id":"925a10fa.fa3dc","type":"function","z":"36dec49a.6065fc","name":"Casos","func":"var res = {};\nres.topic = \"Texto\";\nres.payload = {};\n\nif(msg.payload==11111)\n{\n    res.topic = \"tiempoAbierta\"\n    res.payload = {\"Alerta\": \"Puerta abierta por mas de 30 segundos\"};\n}\nelse if(msg.payload==22222)\n{\n    res.topic = \"movimiento\"\n    res.payload = {\"Alerta\": \"Se detecto movimiento en la cerradura\"};\n}\nelse if(msg.payload==33333)\n{\n    res.topic = \"intentosFallidos\"\n    res.payload = {\"Alerta\": \"Numero de intentos excedidos para entrar\"};\n}\nelse if(msg.payload==44444)\n{\n    res.topic = \"bateriaCritica\"\n    res.payload = {\"Alerta\": \"Cerradura con nivel de bateria critica\"};\n}\nelse\n{\n    res.payload = null;\n}\nreturn res;","outputs":1,"noerr":0,"x":400,"y":220,"wires":[["59c5b9b4.c31c68","4973410d.97a82","2a516724.116a28","66999812.6f0208","2fe0afa3.76c58"]]},{"id":"59c5b9b4.c31c68","type":"debug","z":"36dec49a.6065fc","name":"Notificacion","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":560,"y":80,"wires":[]},{"id":"4973410d.97a82","type":"function","z":"36dec49a.6065fc","name":"Numero excedido de intentos","func":"var text = msg.payload;\nvar nombre = msg.topic;\nvar res = {};\nif(nombre === \"intentosFallidos\")\n    {\n        res.topic = msg.topic;\n        res.payload = msg.payload;\n        return res;\n    }","outputs":1,"noerr":0,"x":810,"y":440,"wires":[["73e55273.5034ec","53036754.8d7068"]]},{"id":"2a516724.116a28","type":"function","z":"36dec49a.6065fc","name":"Alerta movimiento","func":"var text = msg.payload;\nvar nombre = msg.topic;\nvar res = {};\nif(nombre === \"movimiento\")\n    {\n        res.topic = msg.topic;\n        res.payload = msg.payload;\n        return res;\n    }","outputs":1,"noerr":0,"x":780,"y":280,"wires":[["527acef2.1c179","723caf5d.abd86"]]},{"id":"66999812.6f0208","type":"function","z":"36dec49a.6065fc","name":"Alerta tiempo abierta","func":"var text = msg.payload;\nvar nombre = msg.topic;\nvar res = {};\nif(nombre === \"tiempoAbierta\")\n    {\n        res.topic = msg.topic;\n        res.payload = msg.payload;\n        return res;\n    }","outputs":1,"noerr":0,"x":820,"y":140,"wires":[["1c86b7fc.c37d88","b9e351e7.5be12"]]},{"id":"2fe0afa3.76c58","type":"function","z":"36dec49a.6065fc","name":"Bateria critica","func":"var text = msg.payload;\nvar nombre = msg.topic;\nvar res = {};\nif(nombre === \"bateriaCritica\")\n    {\n        res.topic = msg.topic;\n        res.payload = msg.payload;\n        return res;\n    }","outputs":1,"noerr":0,"x":780,"y":660,"wires":[["66447a6c.230454","4173625.b77329c"]]},{"id":"73e55273.5034ec","type":"debug","z":"36dec49a.6065fc","name":"Intentos","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1050,"y":540,"wires":[]},{"id":"53036754.8d7068","type":"mqtt out","z":"36dec49a.6065fc","name":"","topic":"unidadResidencial/residencia/alarma/intentosExcedidos","qos":"0","retain":"false","broker":"f33f85d2.332288","x":1370,"y":460,"wires":[]},{"id":"527acef2.1c179","type":"debug","z":"36dec49a.6065fc","name":"Movimiento","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1060,"y":340,"wires":[]},{"id":"723caf5d.abd86","type":"mqtt out","z":"36dec49a.6065fc","name":"","topic":"unidadResidencial/residencia/alarma/movimientoDetectado","qos":"0","retain":"false","broker":"f33f85d2.332288","x":1370,"y":280,"wires":[]},{"id":"1c86b7fc.c37d88","type":"debug","z":"36dec49a.6065fc","name":"Tiempo","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1070,"y":40,"wires":[]},{"id":"b9e351e7.5be12","type":"mqtt out","z":"36dec49a.6065fc","name":"","topic":"unidadResidencial/residencia/alarma/puertaAbierta","qos":"0","retain":"false","broker":"f33f85d2.332288","x":1350,"y":80,"wires":[]},{"id":"66447a6c.230454","type":"debug","z":"36dec49a.6065fc","name":"Bateria","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1000,"y":760,"wires":[]},{"id":"4173625.b77329c","type":"mqtt out","z":"36dec49a.6065fc","name":"","topic":"unidadResidencial/residencia/alarma/bateriaCritica","qos":"0","retain":"false","broker":"f33f85d2.332288","x":1360,"y":680,"wires":[]},{"id":"f930c86a.0dc7b8","type":"serial-port","z":"","serialport":"COM9","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","newline":"\\n","bin":"false","out":"char","addchar":false},{"id":"f33f85d2.332288","type":"mqtt-broker","z":"","name":"","broker":"172.24.42.106","port":"8083","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"willTopic":"","willQos":"0","willRetain":"false","willPayload":"","birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":""}]