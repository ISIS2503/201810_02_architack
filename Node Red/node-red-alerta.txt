//Node-red una alerta funcional
[{"id":"ff525de8.d27b3","type":"serial in","z":"36dec49a.6065fc","name":"Arduino","serial":"f930c86a.0dc7b8","x":80,"y":220,"wires":[["b1338661.8ee108","4cae7c02.ac6554"]]},{"id":"4cae7c02.ac6554","type":"function","z":"36dec49a.6065fc","name":"Casos","func":"var res = {};\nres.topic = \"Texto\";\nres.payload = {};\n\nif(msg.payload==11111)\n{\n    res.topic = \"tiempoAbierta\"\n    res.payload = {\"Alerta\": \"Puerta abierta por mas de 30 segundos\"};\n}\nelse if(msg.payload==22222)\n{\n    res.topic = \"movimiento\"\n    res.payload = {\"Alerta\": \"Se detecto movimiento en la cerradura\"};\n}\nelse if(msg.payload==33333)\n{\n    res.topic = \"intentosFallidos\"\n    res.payload = {\"Alerta\": \"Numero de intentos excedidos para entrar\"};\n}\nelse\n{\n    res.payload = null;\n}\nreturn res;","outputs":1,"noerr":0,"x":290,"y":220,"wires":[["debc36c4.4165e8","55ce6d94.02d884","2befdc6a.e4ba14","b61455ca.058398"]]},{"id":"b1338661.8ee108","type":"debug","z":"36dec49a.6065fc","name":"Arduino msg","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":270,"y":300,"wires":[]},{"id":"debc36c4.4165e8","type":"debug","z":"36dec49a.6065fc","name":"Notificacion","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":450,"y":80,"wires":[]},{"id":"b61455ca.058398","type":"function","z":"36dec49a.6065fc","name":"Alerta tiempo abierta","func":"var text = msg.payload;\nvar nombre = msg.topic;\nvar res = {};\nif(nombre === \"tiempoAbierta\")\n    {\n        res.topic = msg.topic;\n        res.payload = msg.payload;\n        return res;\n    }","outputs":1,"noerr":0,"x":720,"y":120,"wires":[["10434779.6267a9","c65370f2.d565"]]},{"id":"c65370f2.d565","type":"mqtt out","z":"36dec49a.6065fc","name":"","topic":"unidadResidencial/residencia/alarma/puertaAbierta","qos":"0","retain":"false","broker":"f33f85d2.332288","x":1250,"y":120,"wires":[]},{"id":"10434779.6267a9","type":"debug","z":"36dec49a.6065fc","name":"Tiempo","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":960,"y":40,"wires":[]},{"id":"f930c86a.0dc7b8","type":"serial-port","z":"","serialport":"COM9","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","newline":"\\n","bin":"false","out":"char","addchar":false},{"id":"f33f85d2.332288","type":"mqtt-broker","z":"","name":"","broker":"172.24.42.106","port":"8083","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"willTopic":"","willQos":"0","willRetain":"false","willPayload":"","birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":""}]